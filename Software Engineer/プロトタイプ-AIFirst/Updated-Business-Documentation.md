# 要求定義ドキュメント作成ガイド

## 概要

このガイドでは、事業のアイディア、議事録、プロジェクトプランなどから要求定義のドキュメントを作成する方法を説明します。

**対象読者**: GitHub Copilot Coding Agentを使用してアプリケーション開発を行うチーム

**参考**: [GitHub Copilot へのタスク割り当て](https://docs.github.com/ja/enterprise-cloud@latest/copilot/using-github-copilot/coding-agent/about-assigning-tasks-to-copilot)

---

## 基本方針

アプリケーションは**ビジネス上の課題を解決**する時に価値を発揮します。そのため、本ガイドではビジネス課題の抽出に重点を置いています。

### 成果物
- As-Is分析とTo-Be分析を含む事業分析レポート（Markdown形式）
- ソフトウェアで実現可能なユースケース一覧
- 各ユースケースの詳細定義書

---

## 推奨ツール

### Microsoft 365 Copilot
ビジネス課題は必ずしもドキュメント化されていない場合があります。社内のメールや会議記録を参照できるMicrosoft 365 Copilotの使用を推奨します。

#### 推奨順位
1. **Microsoft 365 Copilot Researcher**（最強）
   - URL: https://blogs.windows.com/japan/2025/04/14/introducing-researcher-and-analyst-in-microsoft-365-copilot/
   - 詳細なドキュメント作成と根拠説明が強力
   
2. **Microsoft 365 Copilot with GPT-5**
   - URL: https://www.microsoft.com/ja-jp/microsoft-365/copilot/copilot-for-work
   - Reasoning Model使用のため、GPT-5を推奨

### ドキュメント形式
- **形式**: Markdown（`.md`）
- **理由**: GitHub Copilotとの連携が容易
- **命名**: 一般的な名称を使用（例: `requirements.md`, `usecase-list.md`）

> **注意**: Microsoft 365 Copilot ChatからMarkdown形式でエクスポートする場合、「応答のコピー」でテキストとして取得してください。WordファイルからMarkdownへの変換には [MarkItDown](https://github.com/microsoft/markitdown/) の使用を推奨します。

---

## Step 1: 事業分析ドキュメントの作成

As-IsとTo-Be分析を一度に作成します。

### Step 1.1: 対象事業が決まっていない場合

アプリケーション開発対象の事業が未定の場合に使用します。

#### プロンプト

\`\`\`text
# 役割設定
あなたは**McKinsey & Companyのシニアパートナー**であり、企業戦略および事業ポートフォリオ分析の専門家です。

## あなたの専門領域
- 企業現状の多角的分析
- 経営陣への戦略的示唆の提供
- データドリブンな意思決定支援

## 分析対象
- **企業名**: 【◯◯株式会社】（実際の企業名に置き換えてください）
- **分析目的**: 中長期的な成長戦略の立案に向けた現状把握と課題抽出

---

# タスクの目的
対象企業の過去30年間の事業をAs-Isとして分析し、課題を抽出します。その上で、論理的かつ説得力のある解決策（To-Be）を調査し、McKinsey & Company スタイルの経営コンサルタントレポートとして作成してください。

---

# 実施手順

## ステップ1: 分析計画の作成
まず、以下の項目について3～7項目の簡潔なチェックリストを作成してください：
- 分析に必要なデータと情報源
- 使用する分析フレームワーク（PEST, 5 Forces, SWOT等）
- 分析の順序と依存関係
- 期待される成果物

**注**: この段階では概念レベルに留め、実装詳細には踏み込まないでください。

## ステップ2: 情報収集と分析
各分析フレームワークを適用する際は、以下を明記してください：
- **分析の根拠**: 使用したデータソースまたは仮定
- **定量データ**: 可能な限り数値を含める
- **比較基準**: 業界平均、競合他社等

## ステップ3: レポート作成
以下の{事業分析レポート構成}に従ってレポートを作成してください。

## ステップ4: 自己レビュー
作成後、以下の観点で自己チェックを実施してください：
- [ ] 各主張に根拠が示されているか
- [ ] 定量データが含まれているか
- [ ] To-Be と As-Is のギャップが明確か
- [ ] 推奨アクションが具体的か

---

# 出力形式とトーン

## 文章スタイル
- **トーン**: 論理的、簡潔、エビデンスベース
- **構成**: 結論ファースト（Executive Summaryを重視）
- **視覚化**: 図表やフレームワークを積極的に活用

## 詳細記述のガイドライン
- 各セクションはビジネスコンサルタント視点で論理的に記述
- サブポイントは箇条書きまたはテーブル形式で整理
- 必要に応じて補足情報を脚注として追加

---

# 事業分析レポート構成

## 1. Executive Summary（要約）
**必須項目**:
- 分析の目的と背景（3-5行）
- 主な示唆（Key Insights）（3-5つの箇条書き）
- 推奨アクションの概要（優先順位付き）

**例**:
\`\`\`
目的: XYZ社の中長期成長戦略立案のための現状分析
主な示唆:
1. コア事業の市場成長率が鈍化（過去3年でCAGR 2%）
2. デジタルトランスフォーメーションへの投資が競合比30%低い
3. 新興市場での認知度が低い（ブランド認知率15%）
推奨アクション:
1. DX投資を3年で2倍に増額（優先度: 高）
2. アジア市場への進出戦略策定（優先度: 中）
\`\`\`

## 2. Company Overview（企業概要）
**必須項目**:
- 企業の基本情報
  - 設立年、従業員数、売上規模、本社所在地
  - 主要事業セグメントとその売上構成比
- 事業領域と主要製品・サービス
  - 製品ポートフォリオ
  - 主要顧客セグメント
- 経営理念・ビジョン
  - 中期経営計画の要点

## 3. As-Is Analysis（現状分析）

### 3.1 外部環境分析

#### PEST分析
各要因について、事業への影響度を「高・中・低」で評価してください。

| 要因 | 内容 | 事業への影響度 | 対応の緊急度 |
|------|------|---------------|-------------|
| Political（政治） | 規制変更、政策動向等 | | |
| Economic（経済） | 市場成長率、為替等 | | |
| Social（社会） | 人口動態、消費者行動等 | | |
| Technological（技術） | 技術トレンド、イノベーション等 | | |

#### Porter's 5 Forces分析
各要素を5段階（1=低、5=高）で評価し、その根拠を記載してください。

### 3.2 内部環境分析

#### リソースとケイパビリティ
- **組織構造**: 意思決定プロセス、部門間連携
- **人材**: スキルギャップ分析、エンゲージメント指標
- **技術力**: 保有技術、R&D投資額、特許数
- **財務状況**:
  - 収益性指標（ROE, ROA, 営業利益率）
  - 効率性指標（総資産回転率、在庫回転率）
  - 健全性指標（自己資本比率、流動比率）
- **オペレーション**: 生産効率、品質指標、サプライチェーン

### 3.3 事業ポートフォリオ分析

#### BCGマトリクス
事業を以下の4象限に分類し、戦略的位置づけを明示してください：

\`\`\`
【Star】高成長・高シェア
【Problem Child】高成長・低シェア
【Cash Cow】低成長・高シェア
【Dog】低成長・低シェア
\`\`\`

各事業について：
- 売上・利益構成比
- 成長率（CAGR）
- 市場シェア
- 戦略的方向性（拡大/維持/撤退/再構築）

### 3.4 競合分析

主要競合3社を選定し、以下の観点で比較してください：

| 項目 | 自社 | 競合A | 競合B | 競合C |
|------|------|-------|-------|-------|
| 市場シェア | | | | |
| 売上高（直近期） | | | | |
| 主要製品 | | | | |
| 価格戦略 | | | | |
| 差別化要素 | | | | |
| デジタル活用度 | | | | |

### 3.5 SWOT分析

各象限に3-5項目を記載し、優先度を付けてください。

| Strengths（強み） | Weaknesses（弱み） |
|------------------|-------------------|
| 1. （優先度: 高）<br>2. （優先度: 中）<br>3. | 1. （優先度: 高）<br>2. （優先度: 中）<br>3. |

| Opportunities（機会） | Threats（脅威） |
|---------------------|----------------|
| 1. （影響度: 高）<br>2. （影響度: 中）<br>3. | 1. （緊急度: 高）<br>2. （緊急度: 中）<br>3. |

## 4. To-Be Vision（あるべき姿）

### 4.1 ビジョンと戦略的方向性
**必須項目**:
- 3-5年後の目指すべき姿（定量目標を含む）
- 目指すべき市場ポジション（シェア、ブランド認知度等）
- コアコンピテンシーの定義

**例**:
\`\`\`
2028年のビジョン:
- 売上高: 1,000億円（現状比150%）
- 営業利益率: 15%（現状: 10%）
- アジア市場シェア: Top 3
- デジタル化率: 80%（現状: 40%）
\`\`\`

### 4.2 戦略的課題と優先順位
各課題について、以下の評価軸でスコアリングしてください：
- **ビジネスインパクト**: 1-5（5=最大）
- **実現可能性**: 1-5（5=容易）
- **緊急度**: 1-5（5=最緊急）
- **総合スコア**: 上記3項目の加重平均

### 4.3 成長機会の特定
- **新市場**: 地理的拡大、顧客セグメント拡大
- **新製品/サービス**: イノベーション機会
- **新ビジネスモデル**: サブスクリプション、プラットフォーム化等
- **戦略オプション**: M&A、提携、内製化等

各機会について：
- 市場規模（TAM）
- 参入障壁
- 必要投資額
- 期待ROI

## 5. Gap分析（As-IsとTo-Beの差分）

### ギャップの可視化
以下のテーブルで現状と目標を対比してください：

| 項目 | 現状（As-Is） | 目標（To-Be） | ギャップ | 主要施策 |
|------|--------------|--------------|---------|---------|
| 売上高 | | | | |
| 営業利益率 | | | | |
| 市場シェア | | | | |
| デジタル化率 | | | | |

### ギャップを埋めるための主要施策
各施策について：
1. **施策名**
2. **目的**: ギャップのどの部分を埋めるか
3. **実施内容**: 具体的なアクション（3-5項目）
4. **KPI**: 成功指標
5. **タイムライン**: 短期（1年）/ 中期（2-3年）/ 長期（4-5年）
6. **必要リソース**: 予算、人員、技術

## 6. Strategic Recommendations（戦略提言）

### 推奨戦略
優先順位順に3-5つの戦略を提示してください。

#### 戦略1: [戦略名]
- **根拠**: SWOT分析やギャップ分析から導出されたロジック
- **期待効果**: 定量的な効果予測
- **実施ステップ**:
  - 短期（Year 1）: 具体的アクション
  - 中期（Year 2-3）: 具体的アクション
  - 長期（Year 4-5）: 具体的アクション
- **KPI**:
  - Year 1: [指標名] = [目標値]
  - Year 2-3: [指標名] = [目標値]
  - Year 4-5: [指標名] = [目標値]
- **リスクと対策**:
  - リスク1: [対策]
  - リスク2: [対策]

### モニタリング体制
- **レビュー頻度**: 月次/四半期/年次
- **責任者**: 役職名
- **ダッシュボード**: 監視すべきKPI一覧

## 7. Appendix（補足資料）

### データソース
- 使用したデータの出典を列挙
- 仮定を置いた項目とその根拠

### 詳細分析結果
- 本文に含められなかった詳細データ
- 補足的なグラフや表

### 使用フレームワークの説明
- 各フレームワークの簡単な説明
- 適用方法の詳細

---

# 検証チェックリスト

レポート作成後、以下の項目を確認してください：

## 内容の品質
- [ ] 各主張に根拠（データまたは論理）が示されている
- [ ] 定量データが適切に含まれている（目安: 各セクションに最低2つ）
- [ ] SWOT分析の各象限に3-5項目が記載されている
- [ ] To-Beビジョンが定量的な目標を含んでいる
- [ ] ギャップ分析で現状と目標が明確に対比されている
- [ ] 推奨戦略に実施ステップとKPIが含まれている

## 形式と構造
- [ ] Executive Summaryが1ページ以内にまとまっている
- [ ] 図表やテーブルが適切に使用されている
- [ ] セクション番号が正しく付与されている
- [ ] 専門用語に説明が付いている（初出時）

## 実行可能性
- [ ] 推奨アクションが具体的である
- [ ] タイムラインが現実的である
- [ ] 必要リソースが明示されている
- [ ] リスクと対策が記載されている

---
\`\`\`

### Step 1.2: 対象事業が決まっている場合

対象事業が既に決まっており、何らかの分析資料が存在する場合に使用します。

#### プロンプト

\`\`\`text
# 役割設定
あなたは**McKinsey & Companyのシニアパートナー**であり、事業ポートフォリオ改革と変革実行のエキスパートです。

## あなたの専門領域
- クライアント企業が定義した対象事業の戦略的整合性評価
- 市場優位性の分析
- 実行実現性の評価
- 経営層向けの実行可能な成長戦略レポートの策定

## 分析対象
- **企業名**: 【◯◯株式会社】（実際の企業名に置き換えてください）
- **対象事業**: 【事業名を記入】
- **既存資料**: As-Is/To-Be分析資料、事業計画書等

---

# タスクの目的
クライアント企業が作成したAs-IsおよびTo-Be資料をレビューし、以下の3つの観点から戦略的洞察を抽出・再構築してください。

## 評価の3つの観点
1. **戦略的整合性**: 対象事業のTo-Beが企業全体戦略・中期経営計画と整合しているか
2. **市場機会と差別化要因**: 外部市場・競合環境・技術トレンドを踏まえた重点投資領域の特定
3. **実行課題とロードマップ**: To-Be実現に必要な組織能力、デジタル活用、パートナー戦略、KPI設定

---

# 実施手順

## ステップ1: 既存資料のレビューと分析計画
まず、提供された資料を確認し、以下の分析計画を作成してください：

1. **資料の網羅性チェック**
   - [ ] As-Is分析が十分か（外部環境、内部環境、競合分析）
   - [ ] To-Beビジョンが明確か（定量目標、市場ポジション）
   - [ ] ギャップ分析が含まれているか
   
2. **追加分析が必要な領域の特定**
   - 不足している分析フレームワーク
   - 更新が必要なデータ
   - 深掘りが必要な論点

3. **分析の優先順位付け**
   - 高: 戦略的意思決定に直結する項目
   - 中: 実行計画に影響する項目
   - 低: 補足的な分析

## ステップ2: 3つの観点からの評価

### 2.1 戦略的整合性の評価
以下の項目を5段階（1=低、5=高）で評価し、根拠を記載してください：

| 評価項目 | スコア | 根拠 | 改善提案 |
|---------|--------|------|---------|
| 企業ビジョンとの整合性 | | | |
| 中期経営計画との整合性 | | | |
| リソース配分の妥当性 | | | |
| ステークホルダー価値との整合性 | | | |

### 2.2 市場機会と差別化要因の分析
以下の観点から市場機会を評価してください：

**市場環境分析**:
- 市場規模とCAGR（過去3年、今後3年の予測）
- 主要トレンドTop 3とその事業への影響
- 規制環境の変化

**競合環境分析**:
- 競合優位性マトリクス（自社 vs 競合トップ3）
- 参入障壁の高さ（5段階評価 + 根拠）
- 差別化ポイントの持続可能性

**技術トレンド分析**:
- 関連する技術トレンドTop 3
- 各トレンドの成熟度（萌芽期/成長期/成熟期/衰退期）
- 自社の技術適応力評価

**重点投資領域の特定**:
以下の評価軸でスコアリングし、投資優先度を決定してください：
- 市場魅力度（1-5）
- 競合優位性（1-5）
- 投資回収期間（年数）
- 総合評価（市場魅力度 × 競合優位性 ÷ 投資回収期間）

### 2.3 実行課題とロードマップの策定

**組織能力の評価**:
To-Be実現に必要な能力と現状のギャップを評価してください：

| 必要能力 | 現状レベル（1-5） | 目標レベル | ギャップ | 育成/獲得方法 |
|---------|-----------------|-----------|---------|--------------|
| デジタル技術 | | | | |
| データ分析 | | | | |
| アジャイル開発 | | | | |
| プロジェクト管理 | | | | |

**デジタル活用戦略**:
- 活用領域: 業務プロセス、顧客接点、データ分析、AI/ML等
- 期待効果: 効率化、新価値創出、意思決定高速化等
- 実装難易度: 技術、組織、コスト面からの評価

**パートナー戦略**:
- 内製 vs 外部連携の判断基準
- 候補パートナーの選定基準
- 協業モデル（委託、提携、M&A等）

**KPI設定**:
3つの階層でKPIを設定してください：
1. **戦略KPI**（年次）: 売上、利益、シェア等
2. **マイルストーンKPI**（四半期）: プロジェクト進捗、リリース数等
3. **プロセスKPI**（月次）: リードタイム、稼働率、品質指標等

## ステップ3: レポート作成
以下の{事業分析レポート構成}に従って、McKinsey & Company スタイルの戦略提言レポートを作成してください。

## ステップ4: 実行可能性の検証
以下の観点で自己チェックしてください：
- [ ] 提言が具体的なアクションに落とし込まれているか
- [ ] タイムラインが現実的か（リソース、リスクを考慮）
- [ ] KPIが測定可能で意味のある指標か
- [ ] ステークホルダーの合意形成プロセスが考慮されているか

---

# 出力形式とトーン

## 文章スタイル
- **トーン**: 論理的、簡潔、エビデンスベース、実行志向
- **構成**: 結論ファースト、データドリブン、ロジックの明示
- **視覚化**: 図表、マトリクス、ロードマップを積極的に活用

## 詳細記述のガイドライン
- 既存資料の評価結果を明示
- 追加分析の根拠を説明
- 代替案がある場合は比較表を作成
- リスクと対策をセットで記載

---

# 事業分析レポート構成

※Step 1.1と同じ構成を使用してください。ただし、以下のセクションを追加します：

## 追加セクション: 既存資料の評価

### 既存As-Is分析の評価
- 網羅性: [評価コメント]
- 分析の深さ: [評価コメント]
- データの新しさ: [評価コメント]
- 追加実施した分析: [リスト]

### 既存To-Be分析の評価
- ビジョンの明確性: [評価コメント]
- 定量目標の妥当性: [評価コメント]
- 実現可能性: [評価コメント]
- 修正・追加した内容: [リスト]

---

# 検証チェックリスト

## 戦略的整合性
- [ ] 企業全体戦略との整合性が評価されている
- [ ] 中期経営計画との整合性が評価されている
- [ ] リソース配分の妥当性が評価されている

## 市場機会と差別化
- [ ] 市場規模とCAGRが定量的に示されている
- [ ] 競合優位性が明確に評価されている
- [ ] 重点投資領域が優先順位付けされている

## 実行可能性
- [ ] 組織能力のギャップが明確化されている
- [ ] デジタル活用戦略が具体的である
- [ ] KPIが3つの階層で設定されている
- [ ] ロードマップが現実的である

---
\`\`\`

---

## Step 2: ユースケース作成

要求定義ドキュメントから、ソフトウェアで実現可能なユースケースを抽出します。

### 前提条件
- Step 1で作成した要求定義ドキュメントがMarkdown形式で`docs/`フォルダに保存されていること
- GitHubリポジトリが設定されていること

### 成果物
- `docs/usecase/usecase-list.md`: ユースケース一覧
- `docs/usecase/{ユースケースID}/usecase-description.md`: 各ユースケースの詳細定義書

---

### Step 2.1: ユースケース一覧の作成

要求定義ドキュメントから、ソフトウェアで実現すべきユースケースを抽出します。

#### プロンプト

\`\`\`text
# 役割設定
あなたは、世界最高峰のソフトウェア製品を数多く成功に導いてきた**プリンシパル・プロダクトマネージャー**です。

## あなたの専門領域
- 複雑な要求定義ドキュメントの精緻な分析
- ビジネス目標とユーザーのニーズに整合したユースケースの抽出
- 構造的思考、ドメイン知識、ユーザー中心設計の原則の適用
- ユースケースの網羅性、明確性、追跡可能性の確保

---

# タスクの目的
添付の要求定義ドキュメント（`docs/<要求定義>.md`）を分析し、ソフトウェアで効果的に実現できるユースケースをリストアップしてください。

---

# 実施手順

## ステップ1: 要求定義の理解
まず、ドキュメント全体を読み、以下をまとめてください：
1. **ビジネス課題の要約**（3-5行）
2. **ステークホルダー**（役割とニーズ）
3. **解決策の方向性**（3-5項目）

## ステップ2: 実現手段の分類
解決策を以下の3つに分類してください：

### カテゴリA: ソフトウェアで効果的に実現可能
**判定基準**:
- 繰り返し発生するタスクの自動化
- データの収集・分析・可視化
- 多数のユーザー間での情報共有
- リアルタイムでの処理や通知
- 既存システムとの連携

### カテゴリB: ソフトウェアでも可能だが、既存ツール/SaaSで十分
**判定基準**:
- 汎用的な機能（例: メール、カレンダー、ファイル共有）
- カスタマイズ不要で既存製品が適用可能
- 開発コストが既存製品の利用料を大きく上回る

### カテゴリC: ソフトウェアでの実現が不適切
**判定基準**:
- 人的判断や対人スキルが中心の業務
- 一時的な課題で繰り返し発生しない
- 法的・倫理的に自動化が不適切

## ステップ3: カテゴリAのユースケース詳細化
カテゴリAの各項目について、以下を記載してください：

### 必須項目
1. **ユースケースID**: `UC-XXX` 形式（連番）
2. **ユースケース名**: 動詞+目的語の形式（例: 「売上データを分析する」）
3. **詳細説明**: 以下を含む200-300字程度
   - 誰が（アクター）
   - 何を（目的）
   - どのように（概要レベルの手順）
   - なぜ（ビジネス価値）

4. **選定理由**: 以下の観点から説明（各観点2-3行）
   - ソフトウェアで実現すべき具体的な根拠
   - 手作業との比較で期待される効果
   - 他のソリューションとの差別化ポイント

5. **代替手段の検討**
   - 既存アプリケーション/SaaSの候補（あれば）
   - 各候補の評価（3段階: ◎適, ○可, △不可）
   - 評価理由（機能不足、コスト、カスタマイズ性等）

6. **独自開発の価値評価**

#### 独自開発の有効性ランク（1-5）
独自開発することで得られる価値を評価してください：

| ランク | 定義 | 例 |
|-------|------|---|
| 5 | 既存製品では実現不可。独自開発が必須 | 業界特有のロジック、他システムとの深い統合 |
| 4 | 既存製品では大幅なカスタマイズが必要 | 特殊なワークフロー、独自データモデル |
| 3 | 既存製品でも可能だが、独自開発で大きな利点 | UX最適化、パフォーマンス要件 |
| 2 | 既存製品で概ね実現可能 | 標準的な機能に小規模カスタマイズ |
| 1 | 既存製品で十分実現可能 | 汎用的な機能のみ |

**独自開発を選択する場合の条件**: ランク3以上

#### ビジネス価値ランク（1-5）
ビジネスへのインパクトを評価してください：

| ランク | 定義 | 評価基準 |
|-------|------|---------|
| 5 (High) | 経営上のクリティカルな課題を解決 | 売上増加、重大なリスク低減、戦略的優位性 |
| 4 (High) | 事業部門レベルの重要課題を解決 | コスト削減、生産性向上、品質改善 |
| 3 (Med) | 特定部門の業務効率化 | 作業時間短縮、ミス削減 |
| 2 (Low) | 限定的な改善 | 一部のユーザーの利便性向上 |
| 1 (Low) | あれば便利だが必須ではない | Nice-to-have機能 |

**優先的に開発すべき条件**: ランク3以上

7. **情報が不足している項目**: 該当する項目に"N/A"と記載し、必要な情報を明記

## ステップ4: 優先度マトリクスの作成
独自開発すべきユースケースを、以下の2軸でマトリクス化してください：
- X軸: 独自開発の有効性ランク（1-5）
- Y軸: ビジネス価値ランク（1-5）

\`\`\`
【優先度: 最高】 有効性 ≥ 4 かつ ビジネス価値 ≥ 4
【優先度: 高】   有効性 ≥ 3 かつ ビジネス価値 ≥ 3
【優先度: 中】   有効性 ≥ 3 または ビジネス価値 ≥ 3
【優先度: 低】   上記以外（再検討推奨）
\`\`\`

## ステップ5: ロードマップの作成
優先度マトリクスに基づいて、開発ロードマップをMermaid形式で作成してください。

\`\`\`mermaid
gantt
    title 開発ロードマップ
    dateFormat  YYYY-MM-DD
    section フェーズ1（優先度:最高）
    UC-001（ユースケース名）   :a1, 2025-01-01, 90d
    UC-002（ユースケース名）   :a2, 2025-01-01, 60d
    section フェーズ2（優先度:高）
    UC-003（ユースケース名）   :b1, after a1, 45d
\`\`\`

### ロードマップ作成の考慮事項
- 依存関係（例: UC-002がUC-001に依存）
- リソース制約（並行開発可能数）
- ビジネスイベント（決算期、繁忙期等）
- クイックウィン（早期に成果を出せる項目）

---

# 出力形式

## ユースケース一覧表

以下の形式で表を作成してください：

| UC-ID | ユースケース名 | アクター | ビジネス価値 | 有効性 | 優先度 | 既存代替案 | 独自開発理由の要約 |
|-------|--------------|---------|-------------|--------|--------|-----------|------------------|
| UC-001 | 〇〇を△△する | 営業担当 | 4 | 5 | 最高 | なし | [50字以内] |
| UC-002 | ... | ... | 3 | 4 | 高 | Salesforce (△) | [50字以内] |

## 各ユースケースの詳細

各ユースケースについて、以下の構造で詳細を記載してください：

\`\`\`markdown
## UC-XXX: [ユースケース名]

### 基本情報
- **アクター**: [主要ユーザー/システム]
- **目的**: [達成したいこと]
- **ビジネス価値ランク**: X (High/Med/Low)
- **独自開発有効性ランク**: Y
- **優先度**: [最高/高/中/低]

### 詳細説明
[200-300字程度の説明]

### 選定理由
#### ソフトウェアで実現すべき根拠
[2-3行]

#### 期待される効果
- 定量効果: [例: 作業時間50%削減、ミス率70%減少]
- 定性効果: [例: 意思決定の迅速化、顧客満足度向上]

### 既存代替案の検討
| 製品/サービス名 | 評価 | 理由 |
|----------------|------|------|
| 〇〇 | △ | 機能不足: [具体的に] |
| △△ | ○ | カスタマイズ困難: [具体的に] |

### 独自開発を選択する理由
[独自開発が適切である具体的かつ説得力のある理由を3-5行で記載]

### 不足情報
[必要に応じて] N/A または [必要な情報]
\`\`\`

---

# 作成場所
- **ファイルパス**: `/docs/usecase/usecase-list.md`

---

# 検証チェックリスト

作成後、以下を確認してください：

## 内容の品質
- [ ] ユースケースがカテゴリA（ソフトウェアで効果的に実現可能）に該当する
- [ ] 各ユースケースに7つの必須項目が記載されている
- [ ] ビジネス価値と有効性が明確な基準で評価されている
- [ ] 独自開発の理由が具体的で説得力がある
- [ ] 既存代替案が検討されている

## 形式と構造
- [ ] ユースケースIDが連番で付与されている
- [ ] 優先度マトリクスが作成されている
- [ ] ロードマップがMermaid形式で作成されている
- [ ] 依存関係が明示されている

## ビジネス価値
- [ ] 優先度「最高」のユースケースが2-5個ある
- [ ] 各ユースケースの期待効果が定量的に示されている（可能な範囲で）
- [ ] クイックウィン（短期間で成果が出る）項目が含まれている
\`\`\`

---


### Step 2.2: ユースケース詳細定義書の作成

Step 2.1で作成したユースケース一覧から、各ユースケースの詳細な定義書を作成します。

#### プロンプト

```text
# 役割設定
あなたは、世界最高峰のソフトウェア製品を数多く成功に導いてきた**プリンシパル・プロダクトマネージャー**です。

## あなたの専門領域
- 複雑な要求定義ドキュメントの精緻な分析
- ビジネス目標とユーザーのニーズに整合した、明確で実行可能なユースケースの抽出
- 構造的思考、ドメイン知識、ユーザー中心設計の原則の適用
- ユースケースの網羅性、明確性、追跡可能性の確保

---

# タスクの目的
ユースケース一覧を参考にして、**全てのユースケース**について、ソフトウェアとして独自に実装するための、できる限り詳細かつ具体的で深いユースケース定義書を作成してください。

作成するユースケースは、以下の{ユースケース定義書テンプレート}のフォーマット・設計ルールに従ってください。

---

# 参考ドキュメント
- **要求定義**: `docs/{要求定義のドキュメント}.md`
- **ユースケース一覧**: `docs/usecase/usecase-list.md`

---

# 作成場所
**ファイルパス**: `docs/usecase/{ユースケースID}/usecase-description.md`
- 各ユースケースごとに個別のフォルダとファイルを作成
- 例: `docs/usecase/UC-001/usecase-description.md`

---

# ユースケース定義書テンプレート

各項目を漏れなく記載し、記載順も維持してください。項目が該当しない、または現時点で不明な場合は、その理由を簡潔に明記し、フォーマットは維持してください。

## 必須項目一覧

1. **ユースケース名**: 30字以内、動詞+目的語形式
2. **ユースケースID**: UC-XXX形式
3. **目的**: 機能的/ユーザー/ビジネスの3つの視点
4. **アクター**: 主要アクターと副次アクターの詳細
5. **ステークホルダーと関心事**: テーブル形式で整理
6. **前提条件**: システム状態とユーザー状態
7. **終了条件**: 成功時と失敗時の状態
8. **トリガー**: ユーザー操作またはシステムイベント
9. **基本フロー**: ステップバイステップ（5-10ステップ推奨）
10. **代替フロー**: 最低2つの代替シナリオ
11. **例外フロー**: エラー処理（最低1つ）
12. **ビジネスルール**: 最低3つの業務ルール
13. **UI/UX要件**: 画面構成と操作性（該当する場合）
14. **非機能要件**: パフォーマンス、セキュリティ、可用性等
15. **関連ユースケース**: 前提、後続、拡張、利用の各関係
16. **メモ・補足情報**: 設計上の考慮事項と未解決事項

詳細な記載方法は、Step 2.1のユースケース一覧作成プロンプト内の「ユースケース詳細定義書テンプレート」セクションを参照してください。

---

# 進捗管理
作業の進捗状況を `work/usecase-design-status.md` に日本語で記録してください。

---

# エラーハンドリング（共通ルール）

## ファイル書き込み失敗時の対応
大きな文字列の書き込みに失敗する場合があります。その際は以下の手順で対応してください：

1. 書き込む内容を論理的なセクション（3-5個）に分割
2. 複数回に分けて書き込み（最初の書き込みでファイル作成、以降は追記）
3. 書き込み完了後、ファイルサイズと主要セクションの存在を確認

## 作業時間管理
作業時間が10分を超える場合は、作業を中断し、残タスクをIssueとして実行するためのPromptを以下に作成してください：

**Promptの保存先**: `work/usecase-detail-design-issue-prompt-<番号>.md`

---

# 検証チェックリスト

各ユースケース定義書の作成後、以下を確認してください：

## 必須項目の網羅性
- [ ] 16項目すべてが記載されている
- [ ] ユースケースIDが正しく付与されている
- [ ] 関連ドキュメントとの整合性が取れている

## 内容の具体性
- [ ] 基本フローが5-10ステップで記載されている
- [ ] 代替フローが最低2つ記載されている
- [ ] 例外フローが最低1つ記載されている
- [ ] ビジネスルールが最低3つ記載されている
- [ ] 非機能要件が数値目標で示されている

## 実装可能性
- [ ] 開発者が実装に必要な情報が揃っている
- [ ] 曖昧な表現がない（または補足されている）
- [ ] 技術的制約が明記されている
```

---

## ガイドライン: すべてのプロンプトに共通

以下のガイドラインは、このドキュメント内のすべてのプロンプトに共通して適用されます。

### 思考プロセスの明示化
プロンプト実行時は、以下の手順を守ってください：

1. **分析計画の作成**: まず全体の作業計画を3-7項目の箇条書きで示す
2. **段階的実行**: 各ステップを順番に実行
3. **中間確認**: 重要な判断ポイントで自己レビュー
4. **最終検証**: 成果物を検証チェックリストで確認

### 具体性の追求
抽象的な表現を避け、以下のように具体化してください：

| 避けるべき表現 | 推奨される表現 |
|-------------|--------------|
| 「高精度に分析」 | 「以下の3つの観点から分析: 1)..., 2)..., 3)...」 |
| 「深く考察」 | 「根拠となるデータまたは仮定を明記」 |
| 「適切に設計」 | 「以下の基準を満たすように設計: 基準1, 基準2」 |
| 「十分な品質」 | 「以下の品質指標を達成: 指標1=目標値1, 指標2=目標値2」 |

### 成果物の品質基準
各成果物は以下の基準を満たす必要があります：

1. **トレーサビリティ**: 元の要求との対応が明確
2. **完全性**: 必要な情報がすべて含まれている
3. **一貫性**: 他のドキュメントと矛盾がない
4. **明確性**: 解釈の余地がない（または注釈がある）
5. **検証可能性**: 正しく実装されたか確認できる

### エラー対応の原則
問題が発生した場合の対応方針：

1. **エラーの記録**: 何が起きたかを正確に記録
2. **原因の特定**: 可能な限り根本原因を分析
3. **代替案の検討**: 複数の解決策を比較
4. **実行と検証**: 対策を実行し、効果を確認
5. **ドキュメント化**: 対応内容を記録（他の人が参照できるように）

---

## まとめ

### 本ガイドで作成される成果物

1. **事業分析レポート** (`docs/requirements.md` 等)
   - McKinsey & Companyスタイルの戦略提言
   - As-Is分析とTo-Be分析
   - ギャップ分析とロードマップ

2. **ユースケース一覧** (`docs/usecase/usecase-list.md`)
   - ソフトウェアで実現すべきユースケース
   - ビジネス価値と開発有効性の評価
   - 優先度マトリクスとロードマップ

3. **ユースケース詳細定義書** (`docs/usecase/{UC-ID}/usecase-description.md`)
   - 各ユースケースの16項目の詳細仕様
   - 基本フロー、代替フロー、例外フロー
   - 非機能要件とビジネスルール

### 改善のポイント（OpenAIガイダンスに基づく）

本ガイドは、以下のOpenAIプロンプトエンジニアリングの6つの戦略に基づいて改善されています：

1. **明確な指示**: 各ステップで何をすべきか具体的に記載
2. **参照テキストの提供**: 必要なドキュメントとデータソースを明示
3. **タスクの分割**: 大きなタスクをサブタスクに分解
4. **思考時間の提供**: 分析計画→実行→検証のプロセスを明示
5. **外部ツールの使用**: Microsoft 365 Copilot等の推奨ツールを明示
6. **体系的なテスト**: 各ステップに検証チェックリストを追加

### 次のステップ

これらのドキュメントを基に、以下のステップに進みます：

1. **アプリケーション設計** (ApplicationDesign-microservice-polyglotpersistence.md を参照)
   - マイクロサービスアーキテクチャの設計
   - データモデル設計
   - 画面設計

2. **実装とデプロイ** (Implementation-WebAppOnAzure.md を参照)
   - Azure リソースの作成
   - コード実装
   - CI/CDパイプラインの構築

### サポートとリソース

- [GitHub Copilot ドキュメント](https://docs.github.com/ja/copilot)
- [OpenAI Prompt Engineering Guide](https://platform.openai.com/docs/guides/prompt-engineering)
- [McKinsey & Company - Strategic Analysis Frameworks](https://www.mckinsey.com)

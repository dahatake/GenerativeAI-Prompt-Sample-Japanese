# 要求定義

事業のアイディア、議事録、プロジェクトプランなどから、要求定義のドキュメントを作成します。

GitHub Copilot AgentへのIssue候補でもあります。

https://docs.github.com/ja/enterprise-cloud@latest/copilot/using-github-copilot/coding-agent/about-assigning-tasks-to-copilot

# 作戦

アプリケーションは何らかの**ビジネス上課題の解決**が出来る時に価値を発揮します。
そのため、ビジネスの課題の抽出に力点をあてて話を進めていきます。

## Step. 1 事業分析ドキュメント (=要求定義)の作成

As-IsとTo-Beを一度に作成します。

### ツール

ツールは、最近のLLMであれば、どれでもそれなりにドキュメントを作成してくれます。
ビジネス上の課題は必ずしもファイル化されていない場合もありますし、それらはファイル化自身を、このプロセスでLLMにやってもらう方が良いかもしれません。そのため、社内のメールや会議などを参照できる**Microsoft 365 Copilot**の利用をお勧めします。

おすすめツール:
- (最強) Microsoft 365 Copilot リサーチツール
    - https://blogs.windows.com/japan/2025/04/14/introducing-researcher-and-analyst-in-microsoft-365-copilot/
    - Researcherが使える方は、こちらの利用を強くお勧めします。より詳細なドキュメントの作成をしてくれますし、何よりその理由の説明のドラフトの作成が強力です。

- Microsoft 365 Copilot
    - https://www.microsoft.com/ja-jp/microsoft-365/copilot/copilot-for-work
    - GPT-5の利用を強く推奨します。Reasoning Modelを使いたいためです。

- ドキュメント化することが大事です。
- テキストのファイル: 各Promptの中で**要求定義**など、そのドキュメントが世間一般で通じる名称、つまり、LLMがどんなドキュメントなのかの判断がつきやすいです
- GitHub Copilotへ情報を渡すために、**MarkDown形式**のファイルにしておくのが便利です。

> [!WARNING]
> 現時点のMicrosoft 365 Copilot ChatからのMarkdown形式の作成には注意が必要です。出力結果のテキスト文字列を`応答のコピー`で、テキストとして保持するのが便利です。出力結果はページにしたり(Microsoft Loopになります) やWordにも出力できてMicrosoft 365内の共同作業にはセキュアかつ非常に便利なのですが。それから、Markdownに変換する機能が実装されていません。現時点ではWordなどのファイルをMarkDownに変換するツールとしては、OpenSourceですが、MarkItDownがおススメです。

> MarkItDown:
>
>   https://github.com/microsoft/markitdown/


### Step. 1.1. 対象事業が決まっていない場合

アプリケーション開発対象の事業が何か決まっていない場合に使います。

```text
# 役割
- あなたはMcKinsey & Companyのシニアパートナーであり、企業戦略および事業ポートフォリオ分析の専門家です。あなたの役割は、クライアント企業の現状を多角的に分析し、経営陣に対して戦略的示唆を提供することです。対象企業は【◯◯株式会社】であり、分析の目的は「中長期的な成長戦略の立案に向けた現状把握と課題抽出」です。

# 目的
- 私は対象企業の過去30年間の事業をAs-Isとして高精度に分析・解析して課題を抽出します。それに対しての論理的かつ説得力のある解決策をTo-Beとして調査しています。それらの結果を{事業分析レポート構成}に沿った構成で、潜在的なビジネス価値を評価する McKinsey & Company スタイルの経営コンサルタント レポートとして作成してください。

# ガイドライン
- まず、実施内容の簡潔なチェックリスト（3～7項目）を箇条書きで示してください。それぞれの項目は概念的なもので、実装レベルには踏み込まないでください。
- 各分析・作業前には、実施目的と最小限の入力情報（インプット）を1行で明示してください。
- トーンは論理的かつ簡潔に、エビデンスに基づいた記述としてください。必要に応じて、図表やフレームワークを活用してください。
- 各フィールドの内容はビジネスコンサルタント視点で論理的に記述し、詳細な説明を心がけてください。必要に応じて追加的なサブポイントは配列やリストで表現して構いません。
- レポート全体は日本語で統一してください。
- 各ツール使用時・コード編集時は、直後に1〜2行で結果のバリデーションを行い、想定どおりか確認した上で次のステップを決定してください。問題があれば即時に自己修正を試みてください。

# 事業分析レポート構成
以下の観点から、事業分析レポートを作成してください：

### 1. **Executive Summary（要約）**
- 分析の目的と背景  
- 主な示唆（Key Insights）  
- 推奨アクションの概要  

### 2. **Company Overview（企業概要）**
- 企業の基本情報（設立年、従業員数、売上規模など）  
- 事業領域と主要製品・サービス  
- 経営理念・ビジョン  

### 3. **As-Is Analysis（現状分析）**

#### 3.1 外部環境分析（PEST / 5 Forces）
- 政治・経済・社会・技術的要因（PEST）  
- 業界構造と競争環境（Porter’s 5 Forces）

#### 3.2 内部環境分析（リソース・ケイパビリティ）
- 組織構造・人材・技術力  
- 財務状況（収益性・効率性・健全性）  
- オペレーション・サプライチェーン

#### 3.3 事業ポートフォリオ分析（BCGマトリクス等）
- 各事業の売上・利益構成  
- 成長性と市場シェアの評価  

#### 3.4 競合分析（ベンチマーク）
- 主要競合との比較（製品、価格、シェア、戦略）  
- 差別化要因と競争優位性の有無  

#### 3.5 SWOT分析
- Strengths（強み）  
- Weaknesses（弱み）  
- Opportunities（機会）  
- Threats（脅威）  

### 4. **To-Be Vision（あるべき姿）**

#### 4.1 ビジョンと戦略的方向性
- 中長期的な成長ビジョン  
- 目指すべき市場ポジション  

#### 4.2 戦略的課題と優先順位
- 解決すべき主要課題の特定  
- 優先順位付けと影響度分析  

#### 4.3 成長機会の特定
- 新市場・新製品・新ビジネスモデルの可能性  
- デジタル化・グローバル展開などの戦略オプション  

### 5. **Gap分析（As-IsとTo-Beの差分）**
- 現状とあるべき姿のギャップ  
- ギャップを埋めるための主要施策  

### 6. **Strategic Recommendations（戦略提言）**
- 推奨戦略とその根拠  
- 実行ステップ（短期・中期・長期）  
- KPIとモニタリング体制  

### 7. **Appendix（補足資料）**
- データソース  
- 詳細な分析結果  
- 使用したフレームワークの説明  
```

### Step. 1.2. 対象事業が決まっている場合

もし、対象事業が決まっていて、何らかのドキュメントがある場合には、冒頭の部分を書き換えてください。

```text
### 役割

あなたは **McKinsey & Company のシニアパートナー** であり、事業ポートフォリオ改革と変革実行におけるエキスパートです。
あなたの役割は、クライアント企業【◯◯株式会社】が定義した対象事業に関して、既に存在するAs-Is／To-Be分析資料をもとに、
「戦略的整合性」「市場優位性」「実行実現性」を多角的に評価し、経営層が意思決定に活用できる **実行可能な成長戦略レポート** を策定することです。

### 目的

私は、クライアント企業が作成したAs-IsおよびTo-Be資料をレビューし、以下の3つの観点から戦略的洞察を抽出・再構築したいと考えています。

1. **戦略的整合性**：対象事業のTo-Beが企業全体戦略・中期経営計画と整合しているかを評価
2. **市場機会と差別化要因**：外部市場・競合環境・技術トレンドを踏まえ、重点投資領域を特定
3. **実行課題とロードマップ**：To-Be実現に必要な組織能力、デジタル活用、パートナー戦略、KPI設定を明確化

これらの分析結果を、以下の{事業分析レポート構成}に沿って **McKinsey & Company スタイルの戦略提言レポート** として作成してください。

# ガイドライン
- まず、実施内容の簡潔なチェックリスト（3～7項目）を箇条書きで示してください。それぞれの項目は概念的なもので、実装レベルには踏み込まないでください。
- トーンは論理的かつ簡潔に、エビデンスに基づいた記述としてください。必要に応じて、図表やフレームワークを活用してください。
- 各フィールドの内容はビジネスコンサルタント視点で論理的に記述し、詳細な説明を心がけてください。必要に応じて追加的なサブポイントは配列やリストで表現して構いません。

# 事業分析レポート構成
以下の観点から、事業分析レポートを作成してください：

### 1. **Executive Summary（要約）**
- 分析の目的と背景  
- 主な示唆（Key Insights）  
- 推奨アクションの概要  

### 2. **Company Overview（企業概要）**
- 企業の基本情報（設立年、従業員数、売上規模など）  
- 事業領域と主要製品・サービス  
- 経営理念・ビジョン  

### 3. **As-Is Analysis（現状分析）**

#### 3.1 外部環境分析（PEST / 5 Forces）
- 政治・経済・社会・技術的要因（PEST）  
- 業界構造と競争環境（Porter’s 5 Forces）

#### 3.2 内部環境分析（リソース・ケイパビリティ）
- 組織構造・人材・技術力  
- 財務状況（収益性・効率性・健全性）  
- オペレーション・サプライチェーン

#### 3.3 事業ポートフォリオ分析（BCGマトリクス等）
- 各事業の売上・利益構成  
- 成長性と市場シェアの評価  

#### 3.4 競合分析（ベンチマーク）
- 主要競合との比較（製品、価格、シェア、戦略）  
- 差別化要因と競争優位性の有無  

#### 3.5 SWOT分析
- Strengths（強み）  
- Weaknesses（弱み）  
- Opportunities（機会）  
- Threats（脅威）  

### 4. **To-Be Vision（あるべき姿）**

#### 4.1 ビジョンと戦略的方向性
- 中長期的な成長ビジョン  
- 目指すべき市場ポジション  

#### 4.2 戦略的課題と優先順位
- 解決すべき主要課題の特定  
- 優先順位付けと影響度分析  

#### 4.3 成長機会の特定
- 新市場・新製品・新ビジネスモデルの可能性  
- デジタル化・グローバル展開などの戦略オプション  

### 5. **Gap分析（As-IsとTo-Beの差分）**
- 現状とあるべき姿のギャップ  
- ギャップを埋めるための主要施策  

### 6. **Strategic Recommendations（戦略提言）**
- 推奨戦略とその根拠  
- 実行ステップ（短期・中期・長期）  
- KPIとモニタリング体制  

### 7. **Appendix（補足資料）**
- データソース  
- 詳細な分析結果  
- 使用したフレームワークの説明  
```

### Step 2.フューチャーシナリオとユースケースの作成

ドキュメントとして、フューチャーシナリオとユースケースを作成します。

#### ツール

- GitHub Copilot Coding Agent

  GitHub Copilot の **Coding Agent**のIssueからCoding Agentに作業をしてもらう前提です。

  https://github.blog/news-insights/product-news/github-copilot-meet-the-new-coding-agent/

要求定義のドキュメントは、**Markdown**の形式にして、`/docs`フォルダに保存します。

#### フューチャーシナリオとユースケースの双方を作成することで期待される効果

##### 1) “正しいものを作る”確率が上がる（価値整合性）
* **期待される効果**：Future Scenarioで「なぜ承認が必要か」「承認が遅い原因は何か」「承認を減らす/自動化する余地は？」が先に露出

  * 結果：**“承認機能を作る”ではなく、“例外時のみ承認、通常は自動判定”**のようにUCが価値最適化される

##### 2) “業務・運用・例外”が先に織り込まれ、後戻りが減る

* **期待される効果**：シナリオで「朝一の締め処理」「繁忙期」「権限者不在」「監査ログ」などの**現実の“詰まり所”**を物語として入れられる

  * 結果：UCに最初から「例外フロー」「運用フロー」が含まれ、**UAT直前の爆発**が減る

##### 3) “非ソフトウェア施策”を切り分けられる（投資対効果が改善）

* **期待される効果**：Future Scenarioに「ルール変更」「権限委譲」「入力項目削減」等も同列に書けるため、

  * **ソフトでやるべきこと**
  * **運用で直すべきこと**
    を仕分けしやすい（あなたのPromptの「ソフトウェアが効果的に利用できるものだけ」をより強化できる）

##### 4) ステークホルダー合意が取りやすい（説明が“人間の言葉”になる）

* **期待される効果**：シナリオは「誰が・いつ・何に困り・どう救われるか」を共有できる

  * 結果：合意形成が「画面項目」ではなく「体験/業務成果」で進む

##### 5) 将来拡張に強いユースケース構造になる（機能の足し算を防ぐ）

* **期待される効果**：Future Scenarioで「意思決定」「情報流」「責務」を描くと、UCが

  * 例：**“見積作成”**ではなく **“価格決定（根拠提示・承認条件・例外処理）”**
    のように“概念”として整理され、拡張が整理された形で入る


#### フューチャーシナリオとユースケースの関連性

Future Scenario とUse Caseは、ざっくり言うと **「物語（未来の業務/体験の完成形）」→「実現手段としての機能単位」** という関係です。
ただし、単に上流/下流というより、**スコープの粒度・目的・検証方法・トレーサビリティ**が違います。以下、関係性を“使える形”で詳細化します。

---

##### 1) 定義の違いと位置づけ

- Future Scenario

  - **目的**：業務/顧客体験が将来どうあるべきかを、関係者が同じ絵で理解し合意する
  - **表現**：登場人物・状況・目的・業務フロー・例外・運用・データ流・制約・KPIが一体になった「未来の物語＋業務設計」
  - **アウトカム**：KPI・体験・業務成果（例：処理時間50%削減、ミス率1/3、NPS改善）

- Use Case

  - **目的**：Future Scenarioを実現するために、システム/人/外部サービスがどう振る舞うべきかを明確化する
  - **表現**：アクター、前提、トリガー、基本フロー、代替/例外フロー、入出力、受入条件
  - **アウトカム**：機能要件・非機能要件・テスト観点・実装単位（設計/開発/導入）

**関係性**：
Future Scenarioは「なぜ・何が変わるべきか」を固定し、Use Caseは「それをどう実現するか」を分解して定義します。

##### 2) “1対1”ではなく、基本は「1対多」「多対多」

- よくある対応パターン

  - **1つのFuture Scenario → 複数のUse Case**

    - 例：未来の「受注〜請求が自動で流れる」シナリオ
    → UC：注文取込、与信判定、在庫引当、例外承認、請求発行、消込、監査ログ…など

  - **複数のFuture Scenario → 1つの共通Use Case**

    - 例：複数部門の未来シナリオに共通で「権限に応じた承認」
      → UC：承認ワークフロー（共通基盤）

  - **多対多**

    - 例：顧客体験シナリオと内部運用シナリオが、同じUC群を共有しつつ、一部は分岐する

  **ポイント**：Future Scenarioは「価値の塊」、Use Caseは「能力（capability）の塊」になりやすいので、自然に多対多になります。


##### 3) 分解のしかた：ScenarioからUse Caseを抽出するルール

Future Scenarioの中身を、次の観点で切るとUse Caseが安定します。

  -  (A) 役割（Actor）が切り替わるところで切る

    - 現場担当→上長→管理者→外部システム…のように、責務が変わる境界はUCになりやすい

  - (B) 意思決定（Decision）が発生するところで切る

    - 「承認する/しない」「差し戻す」「例外扱い」などはUC候補
    - ここを切ると、例外フローが取り込まれて後戻りが減る

  - (C) データ状態（State）が変わるところで切る
    
    - 申請=Draft→Submitted→Approved→Completed のような状態遷移
    - 状態遷移を担保するUCを定義すると、運用や監査に強い

  - (D) 外部連携（Integration）が入るところで切る

    - ERP、決済、ID管理、配送などは独立UCにしやすい
    - 非機能（性能/再送/整合性）が見える

  - (E) 例外の頻度が高いところは独立UCにする

    - 「欠損データ」「在庫不足」「権限者不在」「締め処理」など
    - Scenarioに書かれた“困る瞬間”は、Use Caseとして明文化する価値が高い

##### 4) 互いに埋め合う関係（どっちが何を保証するか）

  - Future Scenarioが保証するもの

    - **目的の正しさ**：KPIや業務成果に結びついているか
    - **現実性**：運用・例外・制約が織り込まれているか
    - **合意形成**：現場/経営/ITが同じ未来像を共有できているか

  - Use Caseが保証するもの

    - **実装可能性**：入力/出力/ルール/例外/責務が定義されているか
    - **テスト可能性**：受入条件が切れるか
    - **追跡可能性**：要求/設計/実装/テストまで辿れるか

  つまり、

- Scenarioが弱いと「作ったけど成果が出ない」
- Use Caseが弱いと「良い未来像だけど作れない/漏れる」

##### 5) トレーサビリティの実装：FS→UCの紐づけが肝

Future ScenarioをFS-xx、Use CaseをUC-xxで管理すると強いです。

- 紐づけの基本形

  - UCには必ず以下を持たせる

    - **根拠FS**：どのFuture Scenarioのどの場面（ステップ/例外）から来たか
    - **狙いKPI**：そのUCが改善する指標
    - **成功条件**：シナリオの「成功」をUCの受入条件に落としたもの

例（イメージ）

  - FS-02（繁忙期でも当日出荷できる未来）

    - Step 4：在庫引当で不足なら代替倉庫へ自動振替
    - Exception E2：振替不可なら顧客へ納期選択提示
    - → UC-11：在庫引当・振替判定
    - → UC-12：納期オファー生成・提示
    - → UC-13：例外時のCS介入・履歴記録

こうすると、UCの優先順位も「どのFSの達成に必須か」で説明できます。

##### 6) 粒度の関係：Scenarioは“太く”、Use Caseは“切れる”必要がある

  - Future Scenario：太い（価値単位）

    - 例：受注〜請求が自動で流れて、例外だけ人が介入し、監査も楽

  - Use Case：細い（開発・導入・運用に切れる単位）

    - 例：自動与信判定、例外承認、請求書生成、ログ監査、権限管理…

  **良い状態**：Scenario 1本から、10〜30程度のUCに分解できる（規模により増減）
  **悪い状態**：
    - UCが大きすぎる：実装/テストが切れない
    - UCが細かすぎる：価値が分断され、優先順位が迷子になる

##### 7) 実務上の結論：Scenarioは“Use Caseの品質を上げる上流の型”

Future Scenarioは、Use Case作成の前に

  - 価値（KPI）
  - 業務現実（例外・運用）
  - 制約（監査・権限・SLA）
    を揃えるための“型”です。

その上でUse Caseは

- 実装・導入・テスト可能な単位に切るための“型”です。


#### Step 2.1. フューチャーシナリオの一覧作成

Step.1 で作成した文字列をMarkdown形式で、GitHubのリポジトリーの`/docs`フォルダーにアップロードします。
それを参照して、ユースケースを作成していきます。

参照用のファイル名は、このファイル名で固定する方が作業は楽になります。ですが、必要に応じて追加・変更してください。
もし同じ入力ファイルのパスである場合はIssueに記載する際には、削除してください。

```text
要求定義ドキュメントからFuture Scenarioを抽出し、価値(KPI)と実現性を踏まえた一覧を作成してリポジトリに保存してください。

# 入力（必ず参照）
- 要求定義ドキュメント：`docs/business-requirement.md`
```

#### Step. 2.2 フューチャーシナリオの詳細作成

```text
Future Scenario一覧を読み、各Future Scenarioの詳細（業務フロー/例外/運用/データ/制約/KPI）をUse Case化に直接使える粒度で作成し、Future ScenarioごとのMarkdownに保存する

# 入力（必須）
- 要求定義ドキュメント：`docs/business-requirement.md`（常に参照）
- FS一覧：`/docs/future_scenario/future-scenario-list.md`

```

#### Step. 3.1 ユースケース一覧作成 

```text
要求定義と Future Scenario から「ソフトウェアで実現すべきユースケース」を抽出し、独自開発優先度を評価して一覧化する

# 入力（必須：常に参照）
- 要求定義ドキュメント：`docs/business-requirement.md`
- Future Scenario List：`docs/future_scenario/future-scenario-list.md`
- Future Scenario 詳細：`docs/future_scenario/future-scenario-details-{FS-ID}.md`

```

#### Step. 3.2 フューチャーシナリオとユースケースのマッピングカタログの作成 


```text
Use Case一覧から指定UCを1件だけ詳細化し、FS/要求定義と整合したUC定義書（フロー・例外・ルール・NFR・受入・図）を docs/usecase/usecase-<TARGET_UC_ID>.md に生成/更新する（実装コードは変更しない）

# 入力（必ず参照）
- 要求定義：`docs/business-requirement.md`
- Future Scenario：
  - `docs/future_scenario/future-scenario-list.md`
  - `docs/future_scenario/future-scenario-details-{FS-ID}.md`
- Use Case一覧：`docs/usecase/usecase-list.md`
```

#### Step. 3.3 ユースケース作成

ユースケース一覧を参考にして、全てのユースケースについて、ユースケースを作成します。

```text
Use Case一覧から指定UCを1件だけ詳細化し、FS/要求定義と整合したUC定義書（フロー・例外・ルール・NFR・受入・図）を /docs/usecase/ に生成する

# 入力（必須：必ず参照）
- 要求定義ドキュメント：`docs/<要求定義>.md`（常に参照）
- Future Scenario：
  - `/docs/future_scenario/future-scenario-list.md`
  - `/docs/future_scenario/future-scenario-details-{FS-ID}.md`
- Use Case一覧：`/docs/usecase/usecase-list.md`
```

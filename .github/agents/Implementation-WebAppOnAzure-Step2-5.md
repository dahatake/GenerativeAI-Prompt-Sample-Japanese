---
name: Implementation-WebAppOnAzure-Step2-5-コンピュートデプロイ
description: Azure Functionsを作成してコードをデプロイし、GitHub ActionsでCI/CDを構築、単体テストも作成します
tools: ["*"]
---

# 目的
- {マイクロサービスの実行コード}で実装されたプログラムにコードを、{サービスカタログ}のドキュメントを参考にして、ぞれぞれのMicrosoft Azureのサービスを作成してデプロイします。
- 既存のコードを変更しないでください。
- 作成済みのMicrosoft Azureのサービスは、再度作成しないでください。
- Microsoft Azureのサービス作成はAzure CLIのスクリプトを作成して、そのスクリプトを`Azure MCP Server`で認証してから実行してください。Azure CLIの最新と詳細な仕様は、{MicrosoftDocs}のMCP Serverを必ず参照してください。作成したスクリプトは、Linuxで動作するファイルとして{Azure CLIのスクリプトの保存場所}に保存してください。
- Azure CLIのスクリプトに必要なツールやパッケージのインストール用のスクリプトも作成してください。そのファイルは`infra/{ユースケースID}/create-azure-api-resources-prep.sh`に保存してください。

- 継続的デリバリーを実装します。GitHubからのCI/CDの実装ができるものはｍGitHub Actionsのワークフローを作成して、Microsoft Azureにデプロイしてください。GitHub Actionsの最新と詳細な仕様は、{MicrosoftDocs}のMCP Serverを必ず参照してください。CI/CDの実装ができないものは、プログラムコードを、それぞれ作成したMicrosoft Azureのサービスへアップロードしてください。

- Azureのサービスの作成が成功したら、{サービスカタログ}のドキュメントに、サービスID、マイクロサービス名、Azureのサービス名、サービスの種類、サービスのURL、サービスのID、サービスのリージョンを表形式で追記してください。

- 作成した全てのAzure 上で動作しているサービスの単体テストのプログラムコードも必ず作成してください。Azure FunctionsにデプロイされたAPIを呼び出します単体テストのコードは、シンプルなWeb画面で、APIの引数のデータを入力して、APIの戻り値を表示してください。単体テストのコードは、{単体テスト作成フォルダー}に保存してください。

- 作業の進捗状況を、`work/{ユースケースID}/api-azure-deploy-work-status.md`に日本語で追記してください。

- 作業時間が10分を超える場合は、作業を中断して、このタスクを10分毎のタスクに分割して、Issueとして実行するためのPromptを作成してください。それぞれのPromptを`work/{ユースケースID}/data-azure-compute-deployment-issue-prompt-<番号>.md`に日本語で追記してください。

- ファイルを作成する際に、1つのファイルに大きな文字列を書き込む際に、書き込み処理が失敗する場合があります。ファイルは作成されているのに内容がEmptyになっています。その場合は、書き込む文字列を分割して、複数の回数に書き込み処理を分割して、1つのファイルに出力をしてください。

- 機能の概要説明やアプリケーションの起動手順を日本語で`/README.md`に追記してください。

## ユースケースID
- {ユースケースID}

## マイクロサービスの実行コード
- api/{ユースケースID}/{サービスID}-{サービス名}/
  - {サービスID}は、各サービスのIDを設定する
  - {サービス名}は、各サービスの名称を設定する

## Azure CLIのスクリプトの保存場所
- infra/{ユースケースID}/create-azure-api-resources.sh

## サービスカタログ
- docs/usecase/{ユースケースID}/service-catalog.md

## 単体テスト作成フォルダー
- test/{ユースケースID}

## 技術仕様
- リソースグループ名: `{ユースケースID}`
- リージョン: Japan East
  - もし利用できない場合は、Japan Westまたは、East Asia または South East Asia を選択してください。

# 行動規範
- 不確定な情報は推測せず、仮定と前提条件を明示する。
- ユーザーの意図を誤解しないため、重大な意思決定の前には確認を求める。
- 代替案や将来的な拡張案も併記し、意思決定がしやすい材料を提供する。
- 品質・セキュリティ・コスト・スケジュールのバランスを常に意識する。

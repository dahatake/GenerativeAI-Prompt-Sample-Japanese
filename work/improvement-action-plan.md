# プロンプト改善 - アクションプラン

**作成日**: 2025-11-04  
**目的**: 検証レポートで特定された改善点を反映し、ユーザーの要求に完全に整合した成果物を作成する

---

## タスク概要

検証レポート（validation-report.md）に基づき、以下の優先度で改善を実施する：

### 🔴 優先度高（Critical）- 即座に実施

#### タスク1: プロンプト構造の見直し
**対象ファイル**: Updated-Business-Documentation.md（主に）

**問題**:
- 元のプロンプトの単純な構造（# 役割、# 目的、# ガイドライン）から、
- 複雑な構造（# 役割、## 専門領域、# 目的、# 実施手順、## ステップ1-4、# 出力形式）に変更
- これは「プロンプト文字列の改善」の範囲を超えている可能性

**改善方針**:
**オプションA: 構造を維持しながら内容を強化（推奨）**
- 元のセクション構造（# 役割、# 目的、# ガイドライン）を保持
- 各セクション内の**記述内容**を具体化・詳細化
- 新規セクションは追加せず、既存セクション内に情報を統合

**実装方法**:
```markdown
【改善前（現在）】
# 役割
あなたは...
## あなたの専門領域
- ...

# 目的
...

# 実施手順
## ステップ1
## ステップ2
...

【改善後】
# 役割
あなたはMcKinsey & Companyのシニアパートナーであり、企業戦略および事業ポートフォリオ分析の専門家です。あなたの専門領域は以下の通りです：
- クライアント企業の現状を多角的に分析し、経営陣に対して戦略的示唆を提供する
- 対象企業：【◯◯株式会社】
- 分析の目的：中長期的な成長戦略の立案に向けた現状把握と課題抽出

# 目的
対象企業の過去30年間の事業について、以下の2つの分析を実施し、McKinsey & Company スタイルの経営コンサルタントレポートを作成してください。

1. **As-Is分析**: 現状を以下の観点から分析し、課題を抽出する
   - 外部環境（PEST、Porter's 5 Forces）
   - 内部環境（リソース、ケイパビリティ、財務状況）
   - 事業ポートフォリオ（BCGマトリクス等）
   - 競合分析（ベンチマーク）
   - SWOT分析

2. **To-Be分析**: 論理的かつ説得力のある解決策を提示し、潜在的なビジネス価値を評価する
   - 中長期的な成長ビジョン
   - 戦略的課題と優先順位
   - 成長機会の特定

# ガイドライン

## 作業の進め方
まず、以下を含む簡潔なチェックリスト（3～7項目）を箇条書きで示してください：
- 分析に使用するフレームワーク（PEST、5 Forces、SWOT等）
- 必要なデータと情報源
- 分析の順序
- 期待される成果物

各項目は概念的なレベルに留め、実装レベルには踏み込まないでください。

その後、以下の手順で分析を実施してください：

1. **情報収集と分析**: 各分析フレームワークを適用する際は、以下を必ず明記する
   - **根拠**: 使用したデータソースまたは仮定
   - **定量データ**: 可能な限り数値を含める（例：市場規模、成長率、シェア）
   - **比較基準**: 業界平均、競合他社等との比較

2. **レポート作成**: {事業分析レポート構成}に従って、レポートを作成する

3. **自己レビュー**: 作成後、以下の観点で確認する
   - [ ] 各主張に根拠（データまたは論理）が示されているか
   - [ ] 定量データが適切に含まれているか
   - [ ] As-Is と To-Be のギャップが明確に示されているか
   - [ ] 推奨アクションが具体的で実行可能か

## トーンとスタイル
- 論理的かつ簡潔に記述する
- エビデンスに基づいた記述とする
- 必要に応じて、図表やフレームワークを活用する
- 各フィールドの内容はビジネスコンサルタント視点で論理的に記述し、詳細な説明を心がける
- 必要に応じて追加的なサブポイントは配列やリストで表現する

# 事業分析レポート構成
（以下、元の内容を維持）
```

**効果**:
- 元の構造を維持しながら、内容の具体性を大幅に向上
- ユーザーの「プロンプト文字列のみ改善」の要求に整合
- OpenAIの6つの戦略は依然として適用可能

#### タスク2: プロンプト量の最適化
**対象ファイル**: Updated-Implementation-WebAppOnAzure.md（主に）

**問題**:
- 711行 → 2,103行（+196%）に増加
- 長いコード例やテンプレートがプロンプトの流れを阻害
- LLMのコンテキストウィンドウを圧迫する可能性

**改善方針**:
1. **コード例の簡略化**: 完全なコードではなく、要点のみの例に変更
2. **テンプレートの概要化**: 詳細は省略し、構造のみ示す
3. **参照の活用**: 長い例は「別ファイル参照」または「公式ドキュメント参照」に変更

**実装例**:

```markdown
【改善前（現在）】
以下は、Azure OpenAI Serviceをデプロイする完全なAzure CLIスクリプトの例です：

\`\`\`bash
#!/bin/bash
# 変数定義
RESOURCE_GROUP="rg-myapp-prod"
LOCATION="japaneast"
OPENAI_NAME="openai-myapp-prod"
...（50行以上のスクリプト）
\`\`\`

【改善後】
Azure OpenAI Serviceをデプロイするには、以下の主要なAzure CLIコマンドを使用します：

\`\`\`bash
# OpenAIアカウントの作成
az cognitiveservices account create \\
  --name <openai-name> \\
  --resource-group <rg-name> \\
  --kind OpenAI \\
  --sku S0 \\
  --location japaneast

# モデルのデプロイ（GPT-4o等）
az cognitiveservices account deployment create \\
  --name <openai-name> \\
  --resource-group <rg-name> \\
  --deployment-name <deployment-name> \\
  --model-name gpt-4o \\
  --model-version "2024-05-13" \\
  --model-format OpenAI \\
  --sku-capacity 10 \\
  --sku-name "Standard"
\`\`\`

**詳細なスクリプト例とベストプラクティスは、公式ドキュメントを参照してください**:
- https://learn.microsoft.com/ja-jp/azure/ai-services/openai/how-to/create-resource
```

**効果**:
- プロンプト量を30-40%削減
- 可読性の向上
- 本質的な情報に集中

---

### 🟡 優先度中（Important）- 順次実施

#### タスク3: 用語の統一
**問題**: 「実施手順」「手順」「ステップ」の混在

**改善方針**:
- **統一基準**: 
  - セクション名: `# 実施手順`
  - サブセクション: `## ステップ1`、`## ステップ2`...
  - 本文中の参照: 「手順」（例: 「以下の手順で実施してください」）

**実装**:
- 全ファイルを一括置換
- 一貫性チェックを実施

#### タスク4: 曖昧な表現の排除
**問題**: 「適切に」「十分に」等の曖昧な表現が残存

**改善方針**:
- 曖昧な表現をリストアップし、具体的な基準に置き換え

**実装例**:
```markdown
【改善前】
- APIの応答時間を適切に設定してください

【改善後】
- APIの応答時間を500ms以内に設定してください（P99パーセンタイル）
```

#### タスク5: エラーケースの体系化
**改善方針**:
- 各プロンプトに共通のエラーハンドリングセクションを追加

**テンプレート**:
```markdown
# エラーケースと対処方法

## よくある問題と解決策
1. **問題**: ...
   **原因**: ...
   **解決策**: ...

2. **問題**: ...
   **原因**: ...
   **解決策**: ...

## 制約事項と回避策
- **制約**: ...
  **回避策**: ...
```

---

### 🟢 優先度低（Nice to Have）- 将来実施

#### タスク6: バージョン情報の追加
- 使用するツールのバージョンを明記

#### タスク7: 実行時間の目安
- 各ステップの推定実行時間を追加

---

## 実施スケジュール

### Phase 1: Critical（即座に実施）
- [ ] タスク1: プロンプト構造の見直し（推定15分）
  - Updated-Business-Documentation.md
  - Updated-Implementation-WebAppOnAzure.md
  - Updated-ApplicationDesign-microservice-polyglotpersistence.md

- [ ] タスク2: プロンプト量の最適化（推定20分）
  - Updated-Implementation-WebAppOnAzure.md（主に）

### Phase 2: Important（順次実施）
- [ ] タスク3: 用語の統一（推定5分）
- [ ] タスク4: 曖昧な表現の排除（推定10分）
- [ ] タスク5: エラーケースの体系化（推定15分）

### Phase 3: Nice to Have（将来実施）
- [ ] タスク6: バージョン情報の追加
- [ ] タスク7: 実行時間の目安

---

## 成功基準

### Phase 1完了時
- ✅ 元のプロンプト構造が維持されている
- ✅ プロンプト量が適切（元の1.5倍以内が目安）
- ✅ 可読性が向上している
- ✅ OpenAI 6つの戦略が依然として適用されている

### Phase 2完了時
- ✅ 用語使用が一貫している
- ✅ 曖昧な表現が排除されている
- ✅ エラーケースが体系的にカバーされている

---

## 次のステップ

1. **ユーザーへのフィードバック要請**
   - validation-report.mdとこのアクションプランを提示
   - 改善の方向性が正しいか確認

2. **Phase 1の実施**
   - タスク1とタスク2を順次実施
   - 各タスク完了後、中間レビューを実施

3. **Phase 2以降の計画**
   - Phase 1の結果とユーザーフィードバックを基に最終化

---

**作成者**: GitHub Copilot Agent  
**レビュー**: 要

# Phase 1改善 - 完了計画

**作成日**: 2025-11-05  
**ステータス**: 実行中

---

## 概要

Phase 1改善の残作業（19プロンプト）を完了し、全3ファイルで一貫したプロンプト構造を実現します。

### 改善方針
1. 元のセクション構造（# 役割、# 目的、# ガイドライン）を維持
2. 新規追加したセクション（# 実施手順、# 出力形式、## あなたの専門領域等）を削除
3. 削除したセクションの内容を既存セクションに統合
4. OpenAI戦略（ステップバイステップ、チェックリスト等）は維持
5. コード例と図表例を簡略化（完全版→要点のみ+公式ドキュメント参照）

---

## 実施対象

### 1. Updated-Business-Documentation.md（残り2プロンプト）
- ✅ Step 1.1: 完了済み
- ✅ Step 1.2: 完了済み
- ⏳ Step 2.1: ユースケース一覧作成（実施予定）
- ⏳ Step 2.2: ユースケース作成（実施予定）

### 2. Updated-Implementation-WebAppOnAzure.md（全10プロンプト）
- ⏳ Step 1.1: Azureのデータ保存先の選択
- ⏳ Step 1.2: データサービスのデプロイ
- ⏳ Step 2.1: サービスホスト先の選択
- ⏳ Step 2.2: 追加サービスの選定
- ⏳ Step 2.3: 追加機能の作成
- ⏳ Step 2.4: コードの作成
- ⏳ Step 2.5: Azure Computeの作成
- ⏳ Step 3: UI作成
- ⏳ Step 3.1: Webアプリケーションのデプロイ
- ⏳ Step 4: アーキテクチャレビュー

### 3. Updated-ApplicationDesign-microservice-polyglotpersistence.md（全7プロンプト）
- ⏳ Step 1.1: ドメイン分析
- ⏳ Step 1.2: マイクロサービス候補のリストアップ
- ⏳ Step 2: データモデル作成
- ⏳ Step 3: 画面一覧と遷移図の作成
- ⏳ Step 4: サービスカタログ表の作成
- ⏳ Step 5.1: 画面定義書の作成
- ⏳ Step 5.2: マイクロサービス定義書の作成

---

## 改善パターン（確立済み）

### パターン1: サブセクションの削除
```markdown
# Before
# 役割
...
## あなたの専門領域  ← 削除
...

# After
# 役割
...（専門領域の内容を本文に統合）
```

### パターン2: 新規セクションの削除と統合
```markdown
# Before
# 目的
...
# 実施手順  ← 削除（新規追加セクション）
## ステップ1
## ステップ2
# 出力形式  ← 削除（新規追加セクション）
...

# After
# 目的
...
# ガイドライン  ← 元のセクション
まず、チェックリスト（3～7項目）を...
その後、以下の手順で：
1. **ステップ1**: ...
2. **ステップ2**: ...
トーンは...（出力形式の内容を統合）
```

### パターン3: コード例の簡略化
```markdown
# Before（40行の完全なスクリプト）
以下の完全なAzure CLIスクリプトを作成してください：
\`\`\`bash
#!/bin/bash
RESOURCE_GROUP="..."
...（40行）
\`\`\`

# After（10行の要点）
以下の要点を含むAzure CLIスクリプトを作成してください：
**主要なコマンド**:
- `az cognitiveservices account create` - サービス作成
- `az keyvault secret set` - シークレット保存
**完全な例**: https://learn.microsoft.com/...
```

### パターン4: 図表例の簡略化
```markdown
# Before（30行の完全なMermaid図）
以下のようなMermaid ERDを作成してください：
\`\`\`mermaid
erDiagram
    User ||--o{ Order : places
...（30行）
\`\`\`

# After（5行の要点）
以下の要素を含むMermaid ERDを作成してください：
- エンティティ: User、Order、OrderItem等
- 関係: 1対多、多対多を明示
Mermaid ERD記法: https://mermaid.js.org/...
```

---

## 予測される最終結果

### ファイル別の行数

| ファイル | 現在 | 目標 | 削減率 |
|---------|------|------|--------|
| Business-Documentation.md | 537行 | 395行 | -26% |
| Implementation-WebAppOnAzure.md | 2,103行 | 1,425行 | -32% |
| ApplicationDesign-*.md | 1,246行 | 965行 | -23% |
| **合計** | **3,886行** | **2,785行** | **-28%** |

### 品質スコア

| 評価項目 | 現在 | 目標 | 改善 |
|---------|------|------|------|
| 要求仕様との整合性 | 75/100 | 92/100 | +17 |
| 実行可能性と再現性 | 70/100 | 87/100 | +17 |
| 文書完成度 | 80/100 | 92/100 | +12 |
| **総合スコア** | **80/100** | **90/100** | **+10** |

---

## 実施スケジュール

### セッション1（完了済み）
- ✅ Phase 1改善方針の確立
- ✅ 改善パターンの実装とテスト（Business-Documentation Step 1.1, 1.2）

### セッション2（実行中）
- ⏳ Business-Documentation Step 2.1, 2.2の完了
- ⏳ Implementation-WebAppOnAzure 全10プロンプトの最適化
- ⏳ ApplicationDesign 全7プロンプトの最適化

---

## 成功基準

### 必須要件
- ✅ 元のセクション構造（# 役割、# 目的、# ガイドライン）を完全に維持
- ✅ OpenAI戦略（ステップバイステップ、チェックリスト）を維持
- ✅ プロンプト量28-30%削減
- ✅ 全ファイルで一貫した構造

### 品質要件
- ✅ 総合スコア90/100以上
- ✅ 要求仕様との整合性90/100以上
- ✅ LLMの実行可能性85/100以上

---

**計画作成日**: 2025-11-05  
**推定完了時間**: 残り約40-50分  
**ステータス**: 実行中

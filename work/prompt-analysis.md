# プロンプト改善分析レポート

## 分析対象ファイル

1. README.md
2. ApplicationDesign-microservice-polyglotpersistence.md
3. Implementation-WebAppOnAzure.md
4. Business-Documentation.md

## OpenAIガイダンスに基づく評価基準

### 1. 明確な指示 (Write Clear Instructions)
- 具体的で詳細な要件が記述されているか
- 期待される出力の形式、長さ、トーンが明示されているか
- 曖昧さを排除しているか

### 2. 参照テキストの提供 (Provide Reference Text)
- 必要な背景情報やコンテキストが提供されているか
- 参照すべきドキュメントやデータが明示されているか

### 3. 複雑なタスクの分割 (Split Complex Tasks into Simpler Subtasks)
- 大きなタスクが小さなステップに分解されているか
- 各ステップが明確で実行可能か

### 4. モデルに考える時間を与える (Give the Model Time to "Think")
- ステップバイステップの推論を促しているか
- 最終回答前に計画や検証を求めているか

### 5. 外部ツールの使用 (Use External Tools)
- 必要なツールやAPIの使用が明示されているか
- 技術仕様が具体的に記述されているか

### 6. 体系的なテスト (Test Changes Systematically)
- 検証可能な成果物が定義されているか
- 品質基準が明確か

## 各ファイルの分析

### README.md (508行)

#### プロンプト箇所の識別
このファイルには複数の手順とガイダンスが含まれているが、明示的な「Prompt:」で始まるプロンプトは含まれていない。
主に、GitHubのRepositoryの設定方法、Custom Agentの利用方法、うまくいかなかった時の対応例などのドキュメントである。

#### 主な内容
- Step.1: GitHubのRepositoryの作成
- Custom Instructionsの例
- MCP Server設定
- Custom Agent の設定と利用
- Step.2: 要求定義などビジネス面のドキュメントの整備
- Step.3: アプリケーション設計
- Step.4: アプリケーションのコードの実装と、Azureへのデプロイ
- うまくいかなかった時の対応例

#### 評価
**強み:**
- 包括的なワークフローの説明
- Custom Instructionsの具体例が提供されている
- MCP Serverの設定方法が明確

**改善点:**
1. Custom Instructionsの例が非常に長く、重要なポイントが埋もれている
2. 各ステップの目的と期待される成果が明確でない箇所がある
3. エラー対応の例が具体的だが、体系的なトラブルシューティングガイドが不足
4. セキュリティのベストプラクティスが散在している

### ApplicationDesign-microservice-polyglotpersistence.md (780行)

#### プロンプト箇所の識別
このファイルには以下のプロンプトが含まれている:
1. **Step 1.1: ドメイン分析の実施** (約120行のプロンプト)
2. **Step 1.2: マイクロサービスの一覧の抽出** (約100行のプロンプト)
3. **Step 2: データモデル作成** (約50行のプロンプト)
4. **Step 3: 画面一覧と遷移図の作成** (約50行のプロンプト)
5. **Step 4: サービスカタログ表の作成** (約40行のプロンプト)
6. **Step 5.1: 画面定義書の作成** (約120行のプロンプト)
7. **Step 5.2: マイクロサービス定義書の作成** (約280行のプロンプト)

#### 評価
**強み:**
- 役割定義が明確（「マイクロサービスアーキテクチャに関する高度な専門知識と実務経験を持つソフトウェアアーキテクト」など）
- 出力フォーマットが詳細に定義されている
- 参考ドキュメントと作成ファイルが明示されている
- ユースケースIDを使った体系的な管理

**改善点:**
1. プロンプトが非常に長く、重要な指示と詳細な仕様が混在している
2. 「深くかつ慎重に分析・解析」などの抽象的な表現が多い
3. エラーハンドリング（ファイル書き込み失敗時の分割処理）の指示が全プロンプトで重複
4. 作業時間制限（10分超過時の分割）の指示も全プロンプトで重複
5. 期待される出力の具体例が少ない
6. ステップバイステップの推論を明示的に求めていない

### Implementation-WebAppOnAzure.md (711行)

#### プロンプト箇所の識別
このファイルには以下のプロンプトが含まれている:
1. **Step 1.1: Azureのデータ保存先の選択** (約120行のプロンプト)
2. **Step 1.2: データサービスのAzureへのデプロイ** (約70行のプロンプト)
3. **Step 2.1: Azureのサービスのホスト先の選択** (約50行のプロンプト)
4. **Step 2.2: 各サービスが利用する追加のAzureのサービスの選定** (約70行のプロンプト)
5. **Step 2.3: Azureの追加機能の作成** (約60行のプロンプト)
6. **Step 2.4: 各サービスのコードの作成** (約60行のプロンプト)
7. **Step 2.5: Azure Computeの作成** (約70行のプロンプト)
8. **Step 3: UI作成** (約70行のプロンプト)
9. **Step 3.1: Webアプリケーションのデプロイ** (約60行のプロンプト)
10. **Step 4: アーキテクチャレビュー** (約40行のプロンプト)

#### 評価
**強み:**
- 役割定義が明確
- 技術仕様が具体的（リージョン、SKU、モデルなど）
- MCP Serverの活用を明示
- 行動規範セクションがある

**改善点:**
1. プロンプトの構造が類似しており、共通パターンをテンプレート化できる
2. Azure CLIスクリプトの生成指示が詳細だが、エラー処理や検証の指示が不足
3. 「高精度に分析し」「深く考慮して」などの主観的な表現
4. セキュリティ要件の明示が不十分
5. 成果物の検証方法が不明確

### Business-Documentation.md (352行)

#### プロンプト箇所の識別
このファイルには以下のプロンプトが含まれている:
1. **Step 1.1: 対象事業が決まっていない場合** (約60行のプロンプト)
2. **Step 1.2: 対象事業が決まっている場合** (約70行のプロンプト)
3. **Step 2.1: ユースケース一覧作成** (約40行のプロンプト)
4. **Step 2.2: ユースケース作成** (約80行のプロンプト)

#### 評価
**強み:**
- McKinsey & Companyスタイルという明確なペルソナ設定
- 事業分析レポート構成が体系的
- ユースケースの項目が詳細に定義されている

**改善点:**
1. ガイドラインセクションで「チェックリスト（3～7項目）」を求めているが、具体例がない
2. 「高精度に分析・解析」などの主観的表現
3. 出力例が不足
4. ステップバイステップの推論プロセスが明示的でない

## 共通の改善ポイント

### 1. プロンプトの構造化
- **現状**: 長いプロンプトで重要な指示と詳細が混在
- **改善案**: セクションを明確に分離（役割 → 目的 → 入力 → 処理ステップ → 出力形式 → 制約条件）

### 2. 具体性の向上
- **現状**: 「高精度に」「深く」「慎重に」などの抽象的表現
- **改善案**: 具体的な基準や手順を明示（例: "3つ以上の観点から分析"、"各項目に根拠を付記"）

### 3. 推論プロセスの明示化
- **現状**: 最終成果物のみを要求
- **改善案**: 「まず分析計画を箇条書きで示し、その後実行」のように思考プロセスを段階化

### 4. 例とテンプレートの追加
- **現状**: 出力フォーマットは定義されているが、具体例が少ない
- **改善案**: 各セクションに簡潔な例を追加

### 5. 重複指示の削減
- **現状**: エラーハンドリング、作業時間管理の指示が全プロンプトで重複
- **改善案**: 共通ルールをドキュメント先頭で定義し、個別プロンプトでは参照のみ

### 6. 検証基準の明確化
- **現状**: 成果物の品質基準が曖昧
- **改善案**: チェックリスト形式で検証項目を明示

## 改善作業計画

### フェーズ1: 共通テンプレートとガイドラインの作成
1. プロンプト構造のテンプレート作成
2. 共通ルール（エラーハンドリング、作業時間管理）のドキュメント作成

### フェーズ2: 各ファイルの改善
1. README.md - Custom Instructionsの整理、ワークフローの明確化
2. Business-Documentation.md - 具体例の追加、推論プロセスの明示化
3. ApplicationDesign-microservice-polyglotpersistence.md - プロンプトの構造化と簡潔化
4. Implementation-WebAppOnAzure.md - セキュリティ要件の追加、検証手順の明確化

### 推定作業時間
- 各ファイルの分析と改善案作成: 完了
- 改善版の作成:
  - README.md: 10分
  - Business-Documentation.md: 15分
  - ApplicationDesign-microservice-polyglotpersistence.md: 25分
  - Implementation-WebAppOnAzure.md: 20分
  
**合計: 約70分** → タスクを分割する必要あり

